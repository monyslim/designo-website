# Workflow Name
name: CI

# Define when to trigger the workflow
on:
  push: # The event that occurs
    branches:
        - main
jobs:
    print-greeting:
        runs-on: ubuntu-latest

        # Define steps to execute
        steps:
          - name: Check out the code # This checkouts the github repository created
            uses: actions/checkout@v3

          - name: Print Greeting
            run: |
                ```
                 #!/bin/bash
                 mkdir user
                 cd user
                 touch name.txt
                 echo "Hello World!" > name.txt
                 ```
          - name: Install the Docker Engine
            uses: docker/login-action@v3
            with:
              username: ${{ secrets.DOCKER_USERNAME }}
              password: ${{ secrets.DOCKER_PASSWORD }}

          - name: Build the Docker Image
            env:
              image_name: new-image
              version: 1.0.0
              username: ${{ secrets.DOCKER_USERNAME }}
            run: |
                docker build -t $username/$image_name:$version .
          - name: Push the Docker image to Docker Hub
            env:
              image_name: new-image
              version: 1.0.0
              username: ${{ secrets.DOCKER_USERNAME }}
            run: |
                docker push $username/$image_name:$version